<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokedex</title>
    <link rel="stylesheet" href="Pokedex.css">
    <style>
        @media only screen and (max-width: 600px) {
            nav {
                width: 100%; /* Adjust as needed */
                max-width: 500px; /* Set a maximum width for the sidebar */
            }

            main {
                margin-left: 0; /* Reset margin for main content */
            } 
        }
    </style>
</head>
<body>
    <header>
        <h1>Pokemon Search</h1>
        <div class="search-bar">
            <input type="text" id="searchInput" list="pokemonList" placeholder="Search Pokemon...">
            <datalist id="pokemonList">
                <!-- Pokémon suggestions will be populated here -->
            </datalist>
            <button id="searchButton">Search</button>
            <button id="randomizeButton">Randomize</button>
        </div>
    </header>
    <main id="pokemonDisplay"></main> <!-- Display area for Pokémon cards -->
    
    <script src="pokedex.js"></script> <!-- JavaScript file for handling interactions -->

    <nav>
        <ul>
            <li><a href="Pokedex.html" id="pokedexLink">Pokedex</a></li>
            <li><a href="page2.html">Page 2</a></li>
            <!-- Add more navigation links as needed -->
        </ul>
    </nav>
    <main>
        <!-- This section will be updated with the fetched Pokémon data -->
        <div id="pokemonDisplay">
            <!-- Fetched Pokémon information will be displayed here -->
        </div>
    </main>
    <footer>
        <!-- Footer content -->
    </footer>

    <script>
        // Fetch Pokémon names from your backend and populate the datalist
        fetch('/pokemon/?limit=1302') // 
            .then((response) => response.json())
            .then((data) => {
                const pokemonList = document.getElementById("pokemonList");
                data.results.forEach((pokemon) => {
                    const option = document.createElement("option");
                    option.value = pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1); // Capitalize Pokémon names
                    pokemonList.appendChild(option);
                });
            })
            .catch((error) => console.error("Error fetching Pokémon list:", error));

        document.getElementById("searchButton").addEventListener("click", function() {
            const searchInput = document.getElementById("searchInput").value.trim();

            if (searchInput) {
                fetch(`/pokemon/${searchInput.toLowerCase()}`)
                    .then((response) => response.json())
                    .then((pokemon) => {
                        const display = document.getElementById("pokemonDisplay");
                        const capitalizedPokemonName = pokemon.name.charAt(0).toUpperCase() + pokemon.name.slice(1);
                        const capitalizedAbilities = pokemon.abilities.map((ability) => ability.ability.name.charAt(0).toUpperCase() + ability.ability.name.slice(1)).join(", ");
                        display.innerHTML = `
                            <h2>${capitalizedPokemonName}</h2>
                            <img src="${pokemon.sprites.front_default}" alt="${pokemon.name}">
                            <p>Type: ${pokemon.types.map((type) => type.type.name.charAt(0).toUpperCase() + type.type.name.slice(1)).join(", ")}</p>
                        `;
                    })
                    .catch((error) => {
                        console.error("Error fetching Pokémon:", error);
                        document.getElementById("pokemonDisplay").innerHTML = "<p>Pokémon not found. Please try again.</p>";
                    });
            } else {
                document.getElementById("pokemonDisplay").innerHTML = "<p>Please enter a Pokémon name.</p>";
            }
        });
    </script>
</body>
</html>
